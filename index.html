<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EQUIPME.NT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="favicon.ico" rel="icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
    @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap");

      :root {
        --purple-light: #708090;
        --purple-dark: #36454F;
        --purple-medium: #7393B3;
        --gray-light: #f9f9fb;
        --gray-medium: #ccc;
        --gray-dark: #666;
        --font-family: "Poppins", sans-serif;
      }

      /* Reset */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        height: 100%;
        font-family: var(--font-family);
        background: #0f1727;
        color: #fff;
        overflow-x: hidden;
      }

      /* HEADER */
      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 14px 10px;
        border-bottom: 1px solid #1e2a3b;
        position: relative;
        background: #1e2a3b;
        flex-shrink: 0;
      }
      .menu-btn, .user-btn {
        background: none;
        border: none;
        cursor: pointer;
        color: #fff;
        font-size: 1.5rem;
      }
      header h1 {
        font-weight: 600;
        font-size: 1.2rem;
        color: #fff;
      }

      /* Navigation Drawer */
      #menuDrawer {
        position: fixed;
        top: 0; left: 0; bottom: 0;
        width: 240px;
        background: #1e2a3b;
        color: white;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        padding: 20px;
        z-index: 1000;
        font-size: 1.1rem;
      }
      #menuDrawer.active {
        transform: translateX(0);
      }
      #menuDrawer nav a {
        display: block;
        color: white;
        text-decoration: none;
        padding: 14px 0;
        border-bottom: 1px solid var(--purple-light);
        cursor: pointer;
      }
      #menuDrawer nav a:hover {
        background: #1e2a3b;
        color: var(--purple-dark);
      }
      #menuDrawer .close-menu {
        font-size: 1.8rem;
        cursor: pointer;
        margin-bottom: 20px;
      }
      /* Overlay */
      #menuOverlay {
        position: fixed;
        top:0; left:0; right:0; bottom:0;
        background: #1e2a3b;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease;
        z-index: 900;
      }
      #menuOverlay.active {
        opacity: 1;
        visibility: visible;
      }

      /* TABS CONTAINER */
      #tabContent {
        flex-grow: 1;
        overflow-y: auto;
        padding: 16px;
      }

      /* --- HOME DASHBOARD --- */
      #home {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }
      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit,minmax(90px,1fr));
        gap: 14px;
      }
      .stat-card {
        background: #1e2a3b;
        border-radius: 12px;
        padding: 14px;
        text-align: center;
      }
      .stat-num {
        color: #fff;
        font-weight: 700;
        font-size: 1.2rem;
        margin-bottom: 4px;
      }
      .stat-label {
        font-size: 0.75rem;
        color: var(--purple-medium);
      }
      .btn-view-more {
        color: var(--purple-medium);
        font-weight: 600;
        margin-top: 8px;
        cursor: pointer;
        font-size: 0.85rem;
      }

      /* EQUIPMENT CHART */
        #equipmentChart {
          background: #1e2a3b; 
          backdrop-filter: blur(10px); /* Adds the frosted glass blur */
          border-radius: 12px;
          padding: 16px;
          color: #fff;
          font-weight: 700;
          font-size: 0.9rem;
          user-select: none;
        }
      #equipmentChart .bars {
        display: flex;
        justify-content: space-around;
        height: 100px;
        align-items: flex-end;
        margin-top: 12px;
      }
      #equipmentChart .bar {
        width: 16px;
        border-radius: 6px;
        background: var(--purple-dark);
        transition: background 0.25s ease;
      }
      #equipmentChart .bar.light {
        background: var(--purple-medium);
      }
      #equipmentChart .bar-labels {
        display: flex;
        justify-content: space-around;
        margin-top: 4px;
        font-size: 0.7rem;
        color: var(--purple-medium);
      }

      footer {
        background-color: #708090;
      }

      /* Responsive */
      @media (min-width: 600px) {
        #app {
          border-radius: 24px;
          max-width: 480px;
        }
      }

            /* FOOTER */
      footer {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: #1e2a3b;
        display: flex;
        justify-content: space-around;
        align-items: center;
        padding: 10px 0;
        z-index: 1000;
        box-shadow: 0 -2px 5px rgba(0,0,0,0.1); /* Optional shadow for better visibility */
      }
      footer a {
        color: white;
        text-decoration: none;
        padding: 8px;
        border-radius: 8px;
        transition: background-color 0.3s ease;
      }
      footer a:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }
      footer i {
        font-size: 1.5rem;
      }
      /* Responsive */
      @media (min-width: 600px) {
        #app {
          border-radius: 24px;
          max-width: 480px;
        }
        footer {
          padding: 12px 0;
        }
        footer i {
          font-size: 1.8rem;
        }
      }
</style>
</head>
<body>
    <header>
        <button class="menu-btn" aria-label="Open menu" id="btnMenu">&#9776;</button>
        <h1 class="text-xl font-bold">EQUIPME.NT</h1>
        <img id="headerProfileImage" src="https://via.placeholder.com/150" alt="Profile" class="h-8 w-8 rounded-full object-cover">
    </header>

<!-- Navigation Drawer -->
    <div id="menuDrawer" aria-modal="true" role="dialog" aria-labelledby="headerTitle" tabindex="-1">
        <button class="close-menu" aria-label="Close menu" id="btnCloseMenu">&times;</button>
        <nav>
          <a href="defective-equipment.html" data-tab="home">Defective</a>
          <a href="equipment-request.html" data-tab="products">Requests</a>
          <a href="view-equipment.html" data-tab="categories">Equipment</a>
          <a href="view-user.html" data-tab="stores">Users</a>
          <a href="links.html" data-tab="finances">Pdt Links</a>
          <a href="profile.html" data-tab="finances">Profile</a>
        </nav>
    </div>

<script>
  // Currently active tab
    let currentTab = "home";

    // Navigation toggle
    function openMenu() {
      menuDrawer.classList.add("active");
      menuOverlay.classList.add("active");
      menuDrawer.focus();
    }
    function closeMenu() {
      menuDrawer.classList.remove("active");
      menuOverlay.classList.remove("active");
      btnMenu.focus();
    }
    btnMenu.addEventListener("click", openMenu);
    btnCloseMenu.addEventListener("click", closeMenu);
    menuOverlay.addEventListener("click", closeMenu);

    // Nav link clicks
    navLinks.forEach(link => {
      link.addEventListener("click", e => {
        e.preventDefault();
        const tab = link.getAttribute("data-tab");
        switchTab(tab);
        closeMenu();
      });
    });

    // Bottom nav events
    bottomNavBtns.forEach(btn => {
      btn.addEventListener("click", () => {
        const tab = btn.getAttribute("data-tab");
        switchTab(tab);
      });
    });
</script>

 <script>
    // Load profile image if available
        document.addEventListener('DOMContentLoaded', function() {
            const profileData = JSON.parse(localStorage.getItem('profileData'));
            if (profileData && profileData.avatar) {
        document.getElementById('headerProfileImage').src = profileData.avatar;
        }
    });
</script>

<!-- Main Tabs Content -->
  <main id="tabContent">

<!-- HOME -->
    <section id="home" role="tabpanel" aria-hidden="false" tabindex="0">
      <div class="stats" aria-label="Equipments Stats">
        <div class="stat-card" tabindex="0">
          <a href="view-desktop.html"><div class="stat-num" id="desktopCount">0</div>
          <div class="stat-label" style="color: #feea99;">DESKTOP</div></a>
        </div>
        <div class="stat-card" tabindex="0">
          <a href="view-ups.html"><div class="stat-num" id="upsCount">0</div>
          <div class="stat-label" style="color: #b3eaff;">UPS</div></a>
        </div>
        <div class="stat-card" tabindex="0">
          <a href="view-pdt.html"><div class="stat-num" id="pdtCount">0</div>
          <div class="stat-label" style="color: #23c55e;">PDT</div></a>
        </div>
        <div class="stat-card" tabindex="0">
          <a href="view-pos.html"><div class="stat-num" id="posCount">0</div>
          <div class="stat-label" style="color: #2178fa;">POS</div></a>
        </div>
        <div class="stat-card" tabindex="0">
          <a href="view-eft.html"><div class="stat-num" id="eftCount">0</div>
          <div class="stat-label" style="color: #8f77f2;">EFT</div></a>
        </div>
        <div class="stat-card" tabindex="0">
          <a href="view-printer.html"><div class="stat-num" id="printerCount">0</div>
          <div class="stat-label" style="color: #fdbb93;">PRINTER</div></a>
        </div>
      </div>
      <div id="equipmentChart" aria-label="Equipments chart">
        <div>Total Equipments</div>
        <div class="bars" aria-hidden="true">
          <div class="bar light" id="devBar"></div>
          <div class="bar" id="upsBar"></div>
          <div class="bar light" id="pdtBar"></div>
          <div class="bar" id="posBar"></div>
          <div class="bar" id="eftBar"></div>
        </div>
        <div class="bar-labels">
          <div>Dev</div>
          <div>Ups</div>
          <div>Pdt</div>
          <div>Pos</div>
          <div>Eft</div>
        </div>
      </div>
      <div class="stats" aria-label="Top Equipments">
        <div class="stat-card" tabindex="0">
          <a href="view-user.html"><div class="stat-num" id="usersCount">0</div>
          <div class="stat-label">Users</div></a>
        </div>
        <div class="stat-card" tabindex="0">
          <a href="defective-equipment.html"><div class="stat-num" id="defectiveCount">0</div>
          <div class="stat-label">Defective</div></a>
        </div>
        <div class="stat-card" tabindex="0">
          <a href="equipment-request.html"><div class="stat-num" id="requestedCount">0</div>
          <div class="stat-label">Requested</div></a>
        </div>
      </div>

<!-- Footer Navigation -->
    <footer>
        
            <a href="index.html" class="text-white p-2">
                <i class="fas fa-home text-xl"></i>
            </a>
            <a href="add-equipment.html" class="text-white p-2">
                <i class="fas fa-plus text-xl"></i>
            </a>
            <a href="add-user.html" class="text-white p-2">
                <i class="fas fa-user text-xl"></i>
            </a>
            <a href="posUsers.html" class="text-white p-2">
                <i class="fas fa-desktop text-xl"></i>
            </a>
                
       
    </footer>

    <script>
// Function to load and display counts from localStorage
document.addEventListener('DOMContentLoaded', function() {
    // Get equipment data from localStorage
    const equipmentData = JSON.parse(localStorage.getItem('equipment')) || [];
    
    // Count equipment types
    const counts = {
        desktop: 0,
        ups: 0,
        pdt: 0,
        pos: 0,
        eft: 0,
        printer: 0,
        defective: 0
    };
    
    equipmentData.forEach(item => {
        const type = item.type ? item.type.toLowerCase() : '';
        if (counts.hasOwnProperty(type)) {
            counts[type]++;
        }
        if (item.status && item.status.toLowerCase() === 'defective') {
            counts.defective++;
        }
    });
    
    // Update stat-cards
    document.getElementById('desktopCount').innerHTML = counts.desktop;
    document.getElementById('upsCount').innerHTML = counts.ups;
    document.getElementById('pdtCount').innerHTML = counts.pdt;
    document.getElementById('posCount').innerHTML = counts.pos;
    document.getElementById('eftCount').innerHTML = counts.eft;
    document.getElementById('printerCount').innerHTML = counts.printer;
    
    // Update chart bars (assuming max height 100px, scale proportionally)
    const maxCount = Math.max(counts.desktop, counts.ups, counts.pdt, counts.pos, counts.eft);
    const scale = maxCount > 0 ? 100 / maxCount : 1;
    
    document.getElementById('devBar').style.height = (counts.desktop * scale) + 'px';
    document.getElementById('upsBar').style.height = (counts.ups * scale) + 'px';
    document.getElementById('pdtBar').style.height = (counts.pdt * scale) + 'px';
    document.getElementById('posBar').style.height = (counts.pos * scale) + 'px';
    document.getElementById('eftBar').style.height = (counts.eft * scale) + 'px';
    
    // Get users count from regularUsers
    const regularUsersData = JSON.parse(localStorage.getItem('regularUsers')) || [];
    document.getElementById('usersCount').innerHTML = regularUsersData.length;
    
    // Update defective count (already counted above)
    document.getElementById('defectiveCount').innerHTML = counts.defective;
    
    // Get requests count from equipmentRequest
    const equipmentRequestData = JSON.parse(localStorage.getItem('equipmentRequests')) || [];
    document.getElementById('requestedCount').innerHTML = equipmentRequestData.length;
});
</script>
</div>
</body>
</html>